<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–π Telegram –ø—Ä–æ—Ñ–∏–ª—å</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 400px;
            width: 100%;
        }
        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 20px;
            background: #f0f2f5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: #667eea;
            overflow: hidden;
            border: 3px solid #667eea;
        }
        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 24px;
        }
        .username {
            color: #667eea;
            font-size: 18px;
            margin-bottom: 15px;
            font-weight: 500;
        }
        .info-item {
            background: #f8f9fa;
            padding: 12px 15px;
            border-radius: 10px;
            margin: 8px 0;
            text-align: left;
            border-left: 4px solid #667eea;
        }
        .label {
            font-weight: bold;
            color: #333;
            font-size: 14px;
        }
        .value {
            color: #666;
            word-break: break-all;
            font-size: 16px;
            margin-top: 5px;
        }
        .telegram-badge {
            background: #0088cc;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 15px;
            font-size: 14px;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
        .not-in-telegram {
            background: #ff4757;
            color: white;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="avatar" id="avatar">
            üë§
        </div>
        
        <h1 id="userName" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</h1>
        <div class="username" id="userUsername"></div>
        
        <div class="info-item">
            <div class="label">ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</div>
            <div class="value" id="userId">‚Äî</div>
        </div>
        
        <div class="info-item">
            <div class="label">–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:</div>
            <div class="value" id="userLanguage">‚Äî</div>
        </div>
        
        <div class="info-item">
            <div class="label">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:</div>
            <div class="value" id="userPlatform">‚Äî</div>
        </div>

        <div class="info-item">
            <div class="label">–¶–≤–µ—Ç —Ç–µ–º—ã:</div>
            <div class="value" id="userTheme">‚Äî</div>
        </div>
        
        <div class="telegram-badge">
            üì± Telegram Mini App
        </div>
    </div>

    <script>
        function displayUserProfile() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–∫—Ä—ã—Ç–æ –ª–∏ –≤ Telegram Web App
            if (window.Telegram && Telegram.WebApp) {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Web App
                Telegram.WebApp.ready();
                Telegram.WebApp.expand(); // –†–∞—Å–∫—Ä—ã–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
                
                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const user = Telegram.WebApp.initDataUnsafe.user;
                
                if (user) {
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∞–≤–∞—Ç–∞—Ä
                    const avatarElement = document.getElementById('avatar');
                    if (user.photo_url) {
                        avatarElement.innerHTML = '<img src="' + user.photo_url + '" alt="Avatar">';
                    } else {
                        avatarElement.innerHTML = 'üë§';
                        avatarElement.style.fontSize = '40px';
                    }
                    
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏–º—è
                    const fullName = user.first_name + (user.last_name ? ' ' + user.last_name : '');
                    document.getElementById('userName').textContent = fullName;
                    document.getElementById('userName').className = '';
                    
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º username
                    const usernameElement = document.getElementById('userUsername');
                    if (user.username) {
                        usernameElement.textContent = '@' + user.username;
                    } else {
                        usernameElement.textContent = '–ù–µ—Ç username';
                        usernameElement.style.color = '#999';
                    }
                    
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º ID
                    document.getElementById('userId').textContent = user.id;
                    
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —è–∑—ã–∫
                    document.getElementById('userLanguage').textContent = user.language_code || '–ù–µ —É–∫–∞–∑–∞–Ω';
                    
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
                    document.getElementById('userPlatform').textContent = Telegram.WebApp.platform;
                    
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–µ–º—É
                    const theme = Telegram.WebApp.colorScheme;
                    document.getElementById('userTheme').textContent = theme === 'dark' ? '–¢–µ–º–Ω–∞—è' : '–°–≤–µ—Ç–ª–∞—è';
                    
                } else {
                    document.getElementById('userName').textContent = '–î–∞–Ω–Ω—ã–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã';
                    document.getElementById('userName').className = '';
                }
                
            } else {
                // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ –Ω–µ –≤ Telegram
                const container = document.querySelector('.container');
                container.innerHTML = `
                    <div class="not-in-telegram">
                        ‚ö†Ô∏è –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram
                    </div>
                    <p>–≠—Ç–æ Mini App –¥–ª—è Telegram. –ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å, –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –≤ Telegram.</p>
                    <div class="telegram-badge">
                        üì± Telegram Mini App
                    </div>
                `;
            }
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', displayUserProfile);

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        console.log('Telegram WebApp:', Telegram?.WebApp);
        console.log('User data:', Telegram?.WebApp?.initDataUnsafe?.user);
    </script>
</body>
</html>
